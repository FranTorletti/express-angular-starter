"use strict";var ApplicationConfiguration=function(){var e="meanweb",t=["ui.router","ui.utils","ui.bootstrap","ngStorage","restangular","ngAnimate","angular-loading-bar"],n=function(t,n){angular.module(t,n||[]),angular.module(e).requires.push(t)};return{applicationModuleName:e,applicationModuleVendorDependencies:t,registerModule:n}}();console.log(ApplicationConfiguration.applicationModuleName),function(e){function t(){var t;window.location.hash&&"#_=_"===window.location.hash&&(window.history&&history.pushState?window.history.pushState("",document.title,window.location.pathname):(t={top:document.body.scrollTop,left:document.body.scrollLeft},window.location.hash="",document.body.scrollTop=t.top,document.body.scrollLeft=t.left)),angular.bootstrap(document,[e.applicationModuleName])}angular.module(e.applicationModuleName,e.applicationModuleVendorDependencies),angular.element(document).ready(t)}(ApplicationConfiguration),function(e){function t(e,t){e.html5Mode(!0),t.interceptors.push("AuthInterceptor")}angular.module(e.applicationModuleName).config(t),t.$inject=["$locationProvider","$httpProvider"]}(ApplicationConfiguration),function(e){function t(e,t,n){function o(e,o,r,a,s){var i=!1,l=0;if(o.data&&o.data.roles&&o.data.roles.length>0){for(;!i&&l<o.data.roles.length;)("guest"===o.data.roles[l]||n.user&&void 0!==n.user.roles&&-1!==n.user.roles.indexOf(o.data.roles[l]))&&(i=!0),l++;i||(e.preventDefault(),void 0!==n.user&&"object"==typeof n.user?t.go("home"):t.go("home"))}}e.$on("$stateChangeStart",o)}angular.module(e.applicationModuleName).run(t),t.$inject=["$rootScope","$state","Authentication"]}(ApplicationConfiguration),function(e){e.registerModule("core",[])}(ApplicationConfiguration),function(){function e(e,t){var n="../modules/core/templates/";t.otherwise("/"),e.state("home",{url:"/","abstract":!1,templateUrl:n+"home.client.template.html",controller:"HomeController as hc"})}angular.module("core").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function e(e){function t(t){return e.trustAsHtml(t)}return t}angular.module("core").filter("sanitize",e),e.$inject=["$sce"]}(),function(){function e(e){function t(e,t){var n,o={};if(e&&t)for(n=0;n<e.length;n++)o[e[n][t]]||(o[e[n][t]]=[]),o[e[n][t]].push(e[n]);return o}return e(t)}angular.module("core").filter("groupBy",e),e.$inject=["filterStabilize"]}(),function(){function e(){function e(){return t.apply(this,arguments)}function t(e){function t(){var t=[].slice.call(arguments),o=JSON.stringify(t),r=n[o];return r?r:(n[o]=e.apply(this,arguments),n[o])}var n={};return t}return e}angular.module("core").factory("memoize",e),e.$inject=[]}(),function(){function e(e,t){function n(e){e.setBaseUrl("https://localhost:3000/api/v1/"),e.setDefaultHeaders({"x-access-token":void 0,"If-Modified-Since":"Mon, 26 Jul 1997 05:00:00 GMT","Cache-Control":"no-cache",Pragma:"no-cache"})}return t.withConfig(n)}angular.module("core").factory("MEANRestangular",e),e.$inject=["$cacheFactory","Restangular"]}(),function(){function e(){function e(){return r.title}function t(e){r.title=e}function n(){return r.description}function o(e){r.description=e}var r=this,a={getTitle:e,setTitle:t,getDescription:n,setDescription:o};return r.title="Mean",r.description="mean relational boilerplate",a}angular.module("core").factory("Seo",e),e.$inject=[]}(),function(){function e(e){function t(t,n){var o=e.open({animation:!0,templateUrl:"modules/core/templates/modal_alert.client.template.html",windowClass:"hs-modal",controller:"ModalAlertController as mac",resolve:{title:function(){return t},content:function(){return n}}});return o}function n(t,n,o){var r=e.open({animation:!0,templateUrl:"modules/core/templates/modal_confirm.client.template.html",windowClass:"hs-modal",controller:"ModalConfirmController as mcc",resolve:{title:function(){return t},content:function(){return n},callback:function(){return o}}});return r}var o={display:t,confirm:n};return o}angular.module("core").factory("Alert",e),e.$inject=["$uibModal"]}(),function(){function e(e,t,n){return{responseError:function(o){if(!o.config.ignoreAuthModule)switch(o.status){case 401:n.$broadcast("user-invalid-token"),t.get("$state").transitionTo("home");break;case 403:t.get("$state").transitionTo("home")}return e.reject(o)}}}angular.module("core").factory("AuthInterceptor",e),e.$inject=["$q","$injector","$rootScope"]}(),function(){function e(){}angular.module("core").controller("HomeController",e),e.$inject=[]}(),function(){function e(e,t,n,o){var r=this;r.openLogin=o.openLogin,r.logout=n.logout,r.authentication=n}angular.module("core").controller("HeaderController",e),e.$inject=["$uibModal","$state","Authentication","AuthenticationModal"]}(),function(){function e(e){var t=this;t.Seo=e}angular.module("core").controller("HeadController",e),e.$inject=["Seo"]}(),function(){function e(e,t,n){function o(){e.dismiss()}var r=this;r.close=o,r.title=t,r.content=n}angular.module("core").controller("ModalAlertController",e),e.$inject=["$uibModalInstance","title","content"]}(),function(){function e(e,t,n,o){function r(){e.dismiss()}function a(){e.dismiss(),o()}var s=this;s.close=r,s.title=t,s.content=n,s.accept=a}angular.module("core").controller("ModalConfirmController",e),e.$inject=["$uibModalInstance","title","content","callback"]}(),function(e){e.registerModule("tasks",[])}(ApplicationConfiguration),function(){function e(e,t){var n="../modules/tasks/templates/";t.otherwise("/"),e.state("tasks",{url:"/tasks","abstract":!0,templateUrl:n+"tasks.client.template.html"}).state("tasks.list",{url:"/list","abstract":!1,templateUrl:n+"tasks.list.client.template.html",controller:"ListTasksController as ltc"}).state("tasks.create",{url:"/create","abstract":!1,templateUrl:n+"tasks.create.client.template.html",controller:"CreateTasksController as ctc"})}angular.module("tasks").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function e(e){function t(t){return e.all("tasks").post(t)}function n(){return e.all("tasks").getList()}var o={create:t,getAll:n};return o}angular.module("core").factory("Tasks",e),e.$inject=["MEANRestangular"]}(),function(){function e(e,t){function n(){function n(e){t.display("Success","Success"),o.task=e}function r(e){t.display("Error",e)}e.create(o.task).then(n)["catch"](r)}var o=this;o.task={title:""},o.create=n}angular.module("core").controller("CreateTasksController",e),e.$inject=["Tasks","Alert"]}(),function(){function e(e,t,n,o){function r(){function e(e){s.tasks=e}function r(e){n.display(e)}o.user&&t.getAll().then(e)["catch"](r)}function a(){s.tasks=[]}var s=this;r(),e.$on("user-login",r),e.$on("user-logout",a)}angular.module("tasks").controller("ListTasksController",e),e.$inject=["$rootScope","Tasks","Alert","Authentication"]}(),function(e){e.registerModule("users",[])}(ApplicationConfiguration),function(){function e(e,t){var n="../modules/users/templates/";e.state("password-reset",{url:"/users/password/reset/:token","abstract":!1,templateUrl:n+"password-reset.template.html",controller:"PasswordResetController as prc"})}angular.module("users").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function e(e,t,n,o){function r(){var e=o.defaultHeaders;n.token&&(e.Authorization="JWT "+n.token,o.setDefaultHeaders(e))}function a(){var e=o.defaultHeaders;e.Authorization=void 0,o.setDefaultHeaders(e)}function s(){return n.token}function i(t){function a(t){return f.user=t.user,n.user=t.user,n.token=t.token,r(),e.$broadcast("user-login",t.user),t.user}function s(e){throw e}return o.all("token").post(t).then(a)["catch"](s)}function l(){f.user=null,delete n.user,delete n.token,delete n.getstated,delete n.uuid,a(),t.go("home"),e.$broadcast("user-logout")}function c(e){function t(e){return e}function n(e){throw e}return o.all("users").post(e).then(t)["catch"](n)}function u(e){function t(e){return e}function n(e){throw e.data}return o.one("auth").post("forgot",e).then(t)["catch"](n)}function d(e,t){function n(e){return e}function r(e){throw e.data}return o.one("auth","reset").post(e,t).then(n)["catch"](r)}function m(e){function t(e){return e}function n(e){throw e.data}return o.one("auth","reset").customGET(e).then(t)["catch"](n)}var f={user:n.user,login:i,logout:l,signup:c,forgot:u,reset:d,token:m,getToken:s};return r(),f}angular.module("users").factory("Authentication",e),e.$inject=["$rootScope","$state","$localStorage","MEANRestangular"]}(),function(){function e(e){function t(){var t=e.open({animation:!0,templateUrl:"modules/users/templates/login.modal.template.html",windowClass:"hs-modal",controller:"LoginController as mlc"});return t}function n(){var t=e.open({animation:!0,templateUrl:"modules/users/templates/signup.modal.template.html",windowClass:"hs-modal",controller:"SignupController as sc"});return t}function o(){var t=e.open({animation:!0,templateUrl:"modules/users/templates/recovery.modal.template.html",windowClass:"hs-modal",controller:"PasswordRecoveryController as mprc"});return t}var r={openLogin:t,openSignup:n,openRecovery:o};return r}angular.module("users").factory("AuthenticationModal",e),e.$inject=["$uibModal"]}(),function(){function e(e,t,n,o,r){function a(){function e(e){t.close()}function n(e){c.enabled=!0,c.messages.error=e}l()&&c.enabled&&(c.enabled=!1,o.login(c.credentials).then(e)["catch"](n))}function s(){t.dismiss(),r.openSignup()}function i(){t.dismiss(),r.openRecovery()}function l(e){var t=!0,n=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;return c.messages.error=null,(e&&"email"===e||!e)&&(null!==n.exec(c.credentials.email)?(t&=!0,c.messages.email=null):(t&=!1,c.messages.email="Please insert a valid email address")),(e&&"password"===e||!e)&&("undefined"!=typeof c.credentials.password&&""!==c.credentials.password.trim()?(t&=!0,c.messages.password=null):(t&=!1,c.messages.password="Please insert your account password")),t}var c=this;c.enabled=!0,c.credentials={email:void 0,password:void 0},c.messages={error:void 0,email:void 0,password:void 0},c.login=a,c.openSignup=s,c.openRecovery=i,c.isValidData=l}angular.module("users").controller("LoginController",e),e.$inject=["$state","$uibModalInstance","$localStorage","Authentication","AuthenticationModal"]}(),function(){function e(e,t,n,o){function r(){function r(t){s.messages.error=null,s.messages.success=t,e.dismiss(),n.display("Succes",t).result.then(o.openLogin)["catch"](o.openLogin)}function i(e){s.enabled=!0,s.messages.success=null,s.messages.error=e.message}a()&&s.enabled&&(s.enabled=!1,t.forgot(s.credentials).then(r)["catch"](i))}function a(e){var t=!0,n=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;return s.messages.error=null,(e&&"email"===e||!e)&&(null!==n.exec(s.credentials.email)?(t&=!0,s.messages.email=null):(t&=!1,s.messages.email="Please insert a valid email address")),t}var s=this;s.credentials={email:void 0},s.messages={error:void 0,email:void 0,success:void 0},s.enabled=!0,s.doRecovery=r,s.isValidData=a}angular.module("users").controller("PasswordRecoveryController",e),e.$inject=["$uibModalInstance","Authentication","Alert","AuthenticationModal"]}(),function(){function e(e,t,n,o,r,a){function s(){function e(e){function t(e){var t="";t+="An error occurred when try to login ",t+="into your account, please try manually",a.display("Error",t).result.then(o.openLogin)["catch"](o.openLogin)}function n(){}var s={email:l.credentials.email,password:l.credentials.password};l.messages.success="Account created. Automatic login into your account",r.login(s).then(n)["catch"](t)}function t(e){l.error=e.data,l.messages.error=l.error.message,l.enabled=!0}i()&&l.enabled&&(l.enabled=!1,r.signup(l.credentials).then(e)["catch"](t))}function i(e){var t=!0,n=/^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/;return l.messages.error=null,(e&&"name"===e||!e)&&("undefined"!=typeof l.credentials.name&&""!==l.credentials.name.trim()?(t&=!0,l.messages.name=null):(t&=!1,l.messages.name="Please insert your name")),(e&&"email"===e||!e)&&(null!==n.exec(l.credentials.email)?(t&=!0,l.messages.email=null):(t&=!1,l.messages.email="Please insert a valid email address")),(e&&"password"===e||!e)&&("undefined"!=typeof l.credentials.password&&""!==l.credentials.password.trim()?(t&=!0,l.messages.password=null):(t&=!1,l.messages.password="Please insert your account password")),t}var l=this;l.enabled=!0,l.credentials={name:void 0,email:void 0,password:void 0,error:void 0,success:void 0},l.messages={location:"",email:"",address:"",name:"",date:""},l.signup=s,l.isValidData=i,r.user&&t.go("home")}angular.module("users").controller("SignupController",e),e.$inject=["$timeout","$state","$uibModalInstance","AuthenticationModal","Authentication","Alert"]}(),function(){function e(e,t,n,o,r,a){function s(){function n(e){r.user&&r.logout(),c.buttonText="Reset"}function a(e){o.display("Error","Password reset token is invalid or has expired").result.then(s)["catch"](s)}function s(){e.go("home")}t.token?r.token(t.token).then(n)["catch"](a):e.go("home")}function i(){function n(e){c.buttonText="Success",c.messages.error=null,c.messages.success=e,o.display("Success",e).result.then(s)["catch"](s)}function s(){function t(){r.user||e.go("home")}a.openLogin().result.then(t)["catch"](t)}function i(e){c.buttonText="Reset",c.enabled=!0,c.messages.success=null,c.messages.error=e.message}l()&&(c.enabled=!1,c.buttonText="Please wait...",r.reset(t.token,c.credentials).then(n)["catch"](i))}function l(e){var t=!0;return c.messages.error=null,(e&&"password"===e||!e)&&("undefined"!=typeof c.credentials.newPassword&&""!==c.credentials.newPassword.trim()?"undefined"!=typeof c.credentials.verifyPassword&&c.credentials.newPassword!==c.credentials.verifyPassword?(t&=!1,c.messages.check="Password are no the same"):(t&=!0,c.messages.check=null,c.messages.password=null):(t&=!1,c.messages.password="Please insert a new account password")),(e&&"check"===e||!e)&&("undefined"!=typeof c.credentials.verifyPassword&&""!==c.credentials.verifyPassword.trim()?"undefined"!=typeof c.credentials.newPassword&&c.credentials.newPassword!==c.credentials.verifyPassword?(t&=!1,c.messages.check="Password are no the same"):(t&=!0,c.messages.check=null):(t&=!1,c.messages.check="Please insert again new account password")),t}var c=this;c.buttonText="Please wait...",c.credentials={newPassword:void 0,verifyPassword:void 0},c.messages={error:void 0,password:void 0,check:void 0},c.enabled=!0,c.doReset=i,c.isValidData=l,n.setTitle("Homeswitch - Reset Password"),n.setDescription("Homeswitch password recovery and reset"),s()}angular.module("users").controller("PasswordResetController",e),e.$inject=["$state","$stateParams","Seo","Alert","Authentication","AuthenticationModal"]}();